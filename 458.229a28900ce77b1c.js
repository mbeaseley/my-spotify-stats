"use strict";(self.webpackChunkmy_spotify_stats=self.webpackChunkmy_spotify_stats||[]).push([[458],{8458:(O,a,e)=>{e.r(a),e.d(a,{LoginComponent:()=>f});var l=e(6895),r=e(6787),d=e(4466),_=e(1764),c=e(2575),t=e(8274),u=e(673),h=e(1303),m=e(8019),v=e(5134),p=e(42);let f=(()=>{class i{constructor(o,n,s,E,L){this.authoriseService=o,this.storageService=n,this.router=s,this.attributeService=E,this.loadingService=L}onClick(){this.loadingService.toggle(!0),window.location.href=this.authoriseService.logIn()}getAccessTokenFromUrl(o){return o.split("").slice(14).slice(0,-34).join("")}onImageLoad(){setTimeout(()=>{this.loadingService.toggle(!1)},2e3)}ngOnInit(){if(this.router.events.subscribe(n=>{n instanceof c.OD&&this.attributeService.updatePageState("login")}),this.storageService.getLocalStorageItem())return this.router.navigate(["dashboard"],{skipLocationChange:!0});if(this.attributeService.updatePageState("login"),document.location.href.indexOf("#")>-1){const n=this.getAccessTokenFromUrl(location.hash);return this.storageService.setLocalStorageItem("access-token",n),this.storageService.setLocalStorageItem("access-token-date",_().format()),this.router.navigate(["dashboard"],{skipLocationChange:!0})}}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(u.y),t.Y36(h.V),t.Y36(c.F0),t.Y36(m.c),t.Y36(v.b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:8,vars:2,consts:[[1,"login"],[1,"login__group"],[1,"login__container"],["alt","ccdesign logo",1,"login__logo",3,"lazyLoad","useSrcset","load"],["description","spotify login button",3,"clicked"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),t.NdJ("load",function(){return n.onImageLoad()}),t.qZA(),t.TgZ(4,"p"),t._uU(5," Log in with your Spotify account to gain access to many useful tools for your music needs. "),t.qZA(),t.TgZ(6,"app-button",4),t.NdJ("clicked",function(){return n.onClick()}),t._uU(7," Login with Spotify "),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("lazyLoad","assets/img/white-cc.png")("useSrcset",!0))},dependencies:[l.ez,d.m,p.r,r.mZ,r.z1],styles:[".login__group[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);max-width:500px}.login__container[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400;padding:24px;color:#fff;text-align:center;height:443px;box-sizing:border-box}.login__logo[_ngcontent-%COMP%]{width:100%;max-width:224px;padding:12px}"]}),i})()}}]);