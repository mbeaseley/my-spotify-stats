(self.webpackChunkmy_spotify_stats=self.webpackChunkmy_spotify_stats||[]).push([[592],{42:(k,C,u)=>{"use strict";u.d(C,{r:()=>i});var n=u(8274),d=u(6895),y=u(2575);function f(r,g){1&r&&n.Hsn(0)}function b(r,g){1&r&&n.GkF(0)}function P(r,g){if(1&r&&(n.TgZ(0,"a",4),n.YNc(1,b,1,0,"ng-container",5),n.qZA()),2&r){const c=n.oxw(),p=n.MAs(2);n.Q6J("ngClass",c.button.displayClasses)("routerLink",c.button.href)("skipLocationChange",c.skipLocationChange),n.uIk("aria-label",c.button.description||null)("title",c.button.description||null)("target",c.target||null),n.xp6(1),n.Q6J("ngTemplateOutlet",p)}}function h(r,g){1&r&&n.GkF(0)}function O(r,g){if(1&r){const c=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(){n.CHM(c);const a=n.oxw();return n.KtG(a.onClick())}),n.YNc(1,h,1,0,"ng-container",5),n.qZA()}if(2&r){const c=n.oxw(),p=n.MAs(2);n.Q6J("ngClass",c.button.displayClasses),n.uIk("disabled","disabled"===c.button.state||null)("aria-label",c.description||null)("title",c.description||null),n.xp6(1),n.Q6J("ngTemplateOutlet",p)}}const M=["*"];let i=(()=>{class r{constructor(c){this.changeDefectorRef=c,this.skipLocationChange=!1,this.size="medium",this.buttonStyle="primary",this.state="default",this.clicked=new n.vpe}onClick(){this.clicked.emit(!0)}createButton(){return{clicked:this.clicked,size:this.size,style:this.buttonStyle,state:this.state,href:this.href,description:this.description,target:this.target,displayClasses:[`cc-button--size-${this.size}`,`cc-button--style-${this.buttonStyle}`,`cc-button--${this.state}`].filter(c=>!!c).join(" ")}}ngOnChanges(c){(c.state||c.buttonStyle)&&(this.button=this.createButton(),this.changeDefectorRef.markForCheck())}ngOnInit(){this.button=this.createButton()}}return r.\u0275fac=function(c){return new(c||r)(n.Y36(n.sBO))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-button"]],inputs:{href:"href",skipLocationChange:"skipLocationChange",size:"size",buttonStyle:"buttonStyle",state:"state",description:"description",target:"target"},outputs:{clicked:"clicked"},features:[n.TTD],ngContentSelectors:M,decls:5,vars:2,consts:[[1,"cc-button"],["content",""],["role","button","tabindex","0",3,"ngClass","routerLink","skipLocationChange",4,"ngIf"],["type","button",3,"ngClass","click",4,"ngIf"],["role","button","tabindex","0",3,"ngClass","routerLink","skipLocationChange"],[4,"ngTemplateOutlet"],["type","button",3,"ngClass","click"]],template:function(c,p){1&c&&(n.F$t(),n.TgZ(0,"div",0),n.YNc(1,f,1,0,"ng-template",null,1,n.W1O),n.YNc(3,P,2,7,"a",2),n.YNc(4,O,2,5,"button",3),n.qZA()),2&c&&(n.xp6(3),n.Q6J("ngIf",p.button.href),n.xp6(1),n.Q6J("ngIf",!p.button.href))},dependencies:[d.mk,d.O5,d.tP,y.yS],styles:[".cc-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;text-decoration:none!important;-webkit-appearance:none!important;-moz-appearance:none!important;appearance:none!important;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.cc-button[_ngcontent-%COMP%]{display:contents}.cc-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:14px;font-weight:400;display:inline-flex;justify-content:center;align-items:center;position:relative;text-align:center;cursor:pointer}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-primary[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--style-primary[_ngcontent-%COMP%]{color:#fff;background-color:#1db954;border:none;border-radius:999rem}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-primary[_ngcontent-%COMP%]:hover, .cc-button[_ngcontent-%COMP%]   button.cc-button--style-primary[_ngcontent-%COMP%]:hover{background-color:#38e775}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-secondary[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--style-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#0a0a0a;border:2px solid #fff;border-radius:999rem}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-secondary[_ngcontent-%COMP%]:hover, .cc-button[_ngcontent-%COMP%]   button.cc-button--style-secondary[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-text-link[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--style-text-link[_ngcontent-%COMP%]{border:none;color:#b4b4b4;background-color:transparent}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-text-link[_ngcontent-%COMP%]:hover, .cc-button[_ngcontent-%COMP%]   button.cc-button--style-text-link[_ngcontent-%COMP%]:hover{color:#fff;border-bottom:2px solid #fff}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-text-link.cc-button--size-large[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--style-text-link.cc-button--size-large[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400;padding:8px 2px 2px;margin:0 4px}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-text-link-active[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--style-text-link-active[_ngcontent-%COMP%]{border:none;color:#b4b4b4;background-color:transparent;border-bottom:2px solid #b4b4b4}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-text-link-active[_ngcontent-%COMP%]:hover, .cc-button[_ngcontent-%COMP%]   button.cc-button--style-text-link-active[_ngcontent-%COMP%]:hover{color:#fff;border-bottom-color:#fff}.cc-button[_ngcontent-%COMP%]   a.cc-button--style-text-link-active.cc-button--size-large[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--style-text-link-active.cc-button--size-large[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400;padding:8px 2px 2px;margin:0 4px}.cc-button[_ngcontent-%COMP%]   a.cc-button--size-small[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--size-small[_ngcontent-%COMP%]{padding:8px 16px}.cc-button[_ngcontent-%COMP%]   a.cc-button--size-medium[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--size-medium[_ngcontent-%COMP%]{padding:12px 32px}.cc-button[_ngcontent-%COMP%]   a.cc-button--size-large[_ngcontent-%COMP%], .cc-button[_ngcontent-%COMP%]   button.cc-button--size-large[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400;padding:8px 16px}"]}),r})()},7763:(k,C,u)=>{"use strict";u.d(C,{H:()=>f});var n=u(1764),y=u(8274);let f=(()=>{class b{transform(h,O){return n(h).format(O)}}return b.\u0275fac=function(h){return new(h||b)},b.\u0275pipe=y.Yjl({name:"localeDate",type:b,pure:!0}),b})()},6e3:(k,C,u)=>{"use strict";u.d(C,{K:()=>p});var n=u(8274),d=u(7259);class y{}class f{}class b{}class P{constructor(){}clone(){return d(this)}}class h{constructor(){}clone(){return d(this)}getAllArtists(){return this.artists.map(_=>_.name).join(" ")}}var O=u(6805),M=u(930);function i(a,_){const o="object"==typeof _;return new Promise((e,t)=>{const s=new M.Hp({next:l=>{e(l),s.unsubscribe()},error:t,complete:()=>{o?e(_.defaultValue):t(new O.K)}});a.subscribe(s)})}var r=u(1303),g=u(529);let c=(()=>{class a{constructor(o,e){this.storageService=o,this.http=e,this.spotifyUrl="https://api.spotify.com/v1/me"}fromPayload(o){const e=new y;return e.id=o.id,e.name=o.display_name,e.email=o.email,e.image=o.images?.[0].url,e.country=o.country,e.followers=o.followers?.total,e.uri=o.uri,e}getUser(){return i(this.http.get(`${this.spotifyUrl}`,{headers:{Authorization:"Bearer "+this.storageService.getLocalStorageItem()}})).then(o=>this.fromPayload(o))}fromFollowingsPayload(o){return o.artists.items.map(e=>{const t=new f;return t.id=e.id,t.name=e.name,t.popularity=e.popularity,t.genres=e.genres,t.image=e.images?.[0].url,t.followers=e.followers.total,t.type=e.type,t.uri=e.uri,t})}getUserFollowings(){return i(this.http.get(`${this.spotifyUrl}/following`,{headers:{Authorization:"Bearer "+this.storageService.getLocalStorageItem()},params:{type:"artist"}})).then(o=>this.fromFollowingsPayload(o))}fromPlaylistPayload(o){return o.items.map(e=>{const t=new b;return t.id=e.id,t.name=e.name,t.description=e.description,t.image=e.images?.[0].url,t.public=e.public,t.owner=this.fromPayload(e.owner),t.collaborative=e.collaborative,t.uri=e.uri,t})}getUserPlaylists(){return i(this.http.get(`${this.spotifyUrl}/playlists`,{headers:{Authorization:"Bearer "+this.storageService.getLocalStorageItem()}})).then(o=>this.fromPlaylistPayload(o))}fromArtistPayload(o){return o.items.map((e,t)=>{const s=new P;return s.id=e.id,s.name=e.name,s.image=e.images?.[0].url,s.externalLink=e.uri,s.order=t+1,s})}getUserTopArtists(o,e=50){return i(this.http.get(`${this.spotifyUrl}/top/artists`,{headers:{Authorization:"Bearer "+this.storageService.getLocalStorageItem()},params:{time_range:o,limit:e}})).then(t=>this.fromArtistPayload(t))}fromTracksPayload(o){console.log(o);const e=new h;return e.id=o?.id,e.name=o?.name,e.image=o.album?.images?.[0].url,e.duration=o?.duration_ms,e.artists=o?.artists.map(t=>{const s=new P;return s.id=t.id,s.name=t.name,s.externalLink=t.external_urls.spotify,s}),e.uri=o.uri,e}getUserTopTracks(o,e=50){return i(this.http.get(`${this.spotifyUrl}/top/tracks`,{headers:{Authorization:"Bearer "+this.storageService.getLocalStorageItem()},params:{time_range:o,limit:e}})).then(t=>t?.items?.map(s=>this.fromTracksPayload(s))||[])}fromRecentlyPlayedPayload(o){return o.items.map(e=>this.fromTracksPayload(e.track))}getRecentlyPlayedTracks(o=50){return i(this.http.get(`${this.spotifyUrl}/player/recently-played`,{headers:{Authorization:"Bearer "+this.storageService.getLocalStorageItem()},params:{limit:o}})).then(e=>this.fromRecentlyPlayedPayload(e))}}return a.\u0275fac=function(o){return new(o||a)(n.LFG(r.V),n.LFG(g.eN))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),p=(()=>{class a{constructor(o){this.userModelService=o}getUser(){return this.userModelService.getUser()}getFollowings(){return this.userModelService.getUserFollowings()}getPlaylists(){return this.userModelService.getUserPlaylists()}getTopArtists(o,e){return this.userModelService.getUserTopArtists(o,e)}getTopTracks(o,e){return this.userModelService.getUserTopTracks(o,e)}getRecentlyPlayedTracks(o){return this.userModelService.getRecentlyPlayedTracks(o)}}return a.\u0275fac=function(o){return new(o||a)(n.LFG(c))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},7259:k=>{var C=function(){"use strict";function u(i,r){return null!=r&&i instanceof r}var n,d,y;try{n=Map}catch{n=function(){}}try{d=Set}catch{d=function(){}}try{y=Promise}catch{y=function(){}}function f(i,r,g,c,p){"object"==typeof r&&(g=r.depth,c=r.prototype,p=r.includeNonEnumerable,r=r.circular);var a=[],_=[],o=typeof Buffer<"u";return typeof r>"u"&&(r=!0),typeof g>"u"&&(g=1/0),function e(t,s){if(null===t)return null;if(0===s)return t;var l,x;if("object"!=typeof t)return t;if(u(t,n))l=new n;else if(u(t,d))l=new d;else if(u(t,y))l=new y(function(S,w){t.then(function(T){S(e(T,s-1))},function(T){w(e(T,s-1))})});else if(f.__isArray(t))l=[];else if(f.__isRegExp(t))l=new RegExp(t.source,M(t)),t.lastIndex&&(l.lastIndex=t.lastIndex);else if(f.__isDate(t))l=new Date(t.getTime());else{if(o&&Buffer.isBuffer(t))return l=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length),t.copy(l),l;u(t,Error)?l=Object.create(t):typeof c>"u"?(x=Object.getPrototypeOf(t),l=Object.create(x)):(l=Object.create(c),x=c)}if(r){var j=a.indexOf(t);if(-1!=j)return _[j];a.push(t),_.push(l)}for(var m in u(t,n)&&t.forEach(function(S,w){var T=e(w,s-1),A=e(S,s-1);l.set(T,A)}),u(t,d)&&t.forEach(function(S){var w=e(S,s-1);l.add(w)}),t){var z;x&&(z=Object.getOwnPropertyDescriptor(x,m)),(!z||null!=z.set)&&(l[m]=e(t[m],s-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(t);for(m=0;m<E.length;m++){var U=E[m];(v=Object.getOwnPropertyDescriptor(t,U))&&!v.enumerable&&!p||(l[U]=e(t[U],s-1),v.enumerable||Object.defineProperty(l,U,{enumerable:!1}))}}if(p){var L=Object.getOwnPropertyNames(t);for(m=0;m<L.length;m++){var v,B=L[m];(v=Object.getOwnPropertyDescriptor(t,B))&&v.enumerable||(l[B]=e(t[B],s-1),Object.defineProperty(l,B,{enumerable:!1}))}}return l}(i,g)}function b(i){return Object.prototype.toString.call(i)}function M(i){var r="";return i.global&&(r+="g"),i.ignoreCase&&(r+="i"),i.multiline&&(r+="m"),r}return f.clonePrototype=function(r){if(null===r)return null;var g=function(){};return g.prototype=r,new g},f.__objToStr=b,f.__isDate=function P(i){return"object"==typeof i&&"[object Date]"===b(i)},f.__isArray=function h(i){return"object"==typeof i&&"[object Array]"===b(i)},f.__isRegExp=function O(i){return"object"==typeof i&&"[object RegExp]"===b(i)},f.__getRegExpFlags=M,f}();k.exports&&(k.exports=C)}}]);