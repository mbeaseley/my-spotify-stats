"use strict";(self.webpackChunkmy_spotify_stats=self.webpackChunkmy_spotify_stats||[]).push([[377],{377:(x,p,i)=>{i.r(p),i.d(p,{ProfileComponent:()=>T});var g=i(6895),c=i(6787),f=i(4466),u=i(6257),e=i(8274),d=i(1303),m=i(6e3),h=i(4578),P=i(8019),O=i(5134),C=i(42);function M(o,s){if(1&o&&(e.TgZ(0,"div",16)(1,"div",17),e._UZ(2,"img",18),e.TgZ(3,"div",19),e._uU(4),e.qZA()()()),2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",null==t?null:t.image,e.LSH)("alt",null==t?null:t.name),e.xp6(2),e.Oqu(null==t?null:t.name)}}function v(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"img",20),e.NdJ("loadeddata",function(){const l=e.CHM(t),r=l.$implicit,a=l.index,_=e.oxw();return e.KtG((null==r?null:r.length)-1===a&&_.onUserLoad())}),e.qZA(),e.TgZ(3,"div",19),e._uU(4),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Q6J("src",null==t?null:t.image,e.LSH)("alt",null==t?null:t.name),e.xp6(2),e.Oqu(null==t?null:t.name)}}let T=(()=>{class o{constructor(t,n,l,r,a){this.storageService=t,this.userService=n,this.errorService=l,this.attributeService=r,this.loadingService=a,this.loading=!0}onUserLoad(){setTimeout(()=>{this.loadingService.toggle(!1)},1e3)}ngOnInit(){return this.attributeService.updatePageState("dashboard"),Promise.all([this.userService.getUser(),this.userService.getFollowings(),this.userService.getPlaylists(),this.userService.getTopArtists("long_term",10),this.userService.getTopTracks("long_term",10)]).then(([t,n,l,r,a])=>{this.user=t,this.userFollowings=n,this.userPlaylists=l,this.userTopArtists=r,this.userTopTracks=a,this.publicPaylists=(this.userPlaylists||[]).slice().filter(_=>_.public)}).catch(()=>{this.storageService.removeLocalStorageItem(),this.storageService.removeLocalStorageItem("access-token-date"),setTimeout(()=>{this.loadingService.toggle(!1);const t=new u.j("Access Token Error","Access token expired, new token is needed.");return this.errorService.callError("",t)},100)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.V),e.Y36(m.K),e.Y36(h.T),e.Y36(P.c),e.Y36(O.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],standalone:!0,features:[e.jDz],decls:42,vars:14,consts:[[1,"profile"],[1,"profile__banner"],["loading","lazy",1,"profile__image",3,"src","alt","load"],[1,"profile__content","hidden-xs","hidden-sm"],[1,"profile__sub-header"],[1,"profile__name"],[1,"profile__sub-header-info"],[1,"profile__content","hidden-md","hidden-lg","hidden-xl","hidden-xxl"],[1,"profile__section","profile__section-main"],[1,"profile__top-artists"],[1,"profile__section"],[1,"top-list__header"],["buttonStyle","secondary","size","large","href","top-artists",3,"skipLocationChange"],["class","top-list__list",4,"ngFor","ngForOf"],[1,"profile__top-tracks"],["buttonStyle","secondary","size","large","href","top-tracks",3,"skipLocationChange"],[1,"top-list__list"],[1,"top-list__row"],["loading","lazy",1,"top-list__img",3,"src","alt"],[1,"top-list__name"],["loading","lazy",1,"top-list__img",3,"src","alt","loadeddata"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"img",2),e.NdJ("load",function(){return n.onUserLoad()}),e.qZA(),e.TgZ(3,"div",3)(4,"div",4),e._uU(5,"Welcome"),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA(),e.TgZ(8,"div",6)(9,"span"),e._uU(10),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.qZA()()(),e.TgZ(15,"div",7)(16,"span",4),e._uU(17,"Welcome \xa0"),e.qZA(),e.TgZ(18,"span",5),e._uU(19),e.qZA(),e.TgZ(20,"div",6)(21,"span"),e._uU(22),e.qZA(),e.TgZ(23,"span"),e._uU(24),e.qZA(),e.TgZ(25,"span"),e._uU(26),e.qZA()()()(),e.TgZ(27,"div",8)(28,"div",9)(29,"div",10)(30,"div",11),e._uU(31,"Top Artists of All Time"),e.qZA(),e.TgZ(32,"app-button",12),e._uU(33,"Show more"),e.qZA()(),e.YNc(34,M,5,3,"div",13),e.qZA(),e.TgZ(35,"div",14)(36,"div",10)(37,"div",11),e._uU(38,"Top Tracks of All Time"),e.qZA(),e.TgZ(39,"app-button",15),e._uU(40,"Show more"),e.qZA()(),e.YNc(41,v,5,3,"div",13),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("src",null==n.user?null:n.user.image,e.LSH)("alt",null==n.user?null:n.user.name),e.xp6(5),e.Oqu(null==n.user?null:n.user.name),e.xp6(3),e.hij("",null==n.publicPaylists?null:n.publicPaylists.length," Public Playlists \u2022 "),e.xp6(2),e.hij("",null==n.user?null:n.user.followers," Followers \u2022 "),e.xp6(2),e.hij("",null==n.userFollowings?null:n.userFollowings.length," Following"),e.xp6(5),e.Oqu(null==n.user?null:n.user.name),e.xp6(3),e.hij("",null==n.publicPaylists?null:n.publicPaylists.length," Public Playlists \u2022 "),e.xp6(2),e.hij("",null==n.user?null:n.user.followers," Followers \u2022 "),e.xp6(2),e.hij("",null==n.userFollowings?null:n.userFollowings.length," Following"),e.xp6(6),e.Q6J("skipLocationChange",!0),e.xp6(2),e.Q6J("ngForOf",n.userTopArtists),e.xp6(5),e.Q6J("skipLocationChange",!0),e.xp6(2),e.Q6J("ngForOf",n.userTopTracks))},dependencies:[g.ez,g.sg,f.m,C.r,c.mZ],styles:["@media only screen and (max-width: 767px){.profile[_ngcontent-%COMP%]{padding:80px 0 0}.profile[_ngcontent-%COMP%]   .profile__content[_ngcontent-%COMP%]{text-align:center}.profile[_ngcontent-%COMP%]   .profile__banner[_ngcontent-%COMP%]{flex-direction:column}.profile[_ngcontent-%COMP%]   .profile__image[_ngcontent-%COMP%]{max-width:100px}.profile[_ngcontent-%COMP%]   .profile__name[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400;font-weight:700}.profile[_ngcontent-%COMP%]   .profile__section-main[_ngcontent-%COMP%]{max-width:1400px;padding:0 24px;flex-direction:column}.profile[_ngcontent-%COMP%]   .profile__top-artists[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]   .profile__top-tracks[_ngcontent-%COMP%]{padding:0}.profile[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .top-list__list[_ngcontent-%COMP%]{padding:0 24px}.profile[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .top-list__name[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:14px;font-weight:400}}.profile__banner[_ngcontent-%COMP%]{display:flex;align-items:center}.profile__image[_ngcontent-%COMP%]{margin:24px 40px;border-radius:100%;max-width:250px}.profile__sub-header[_ngcontent-%COMP%], .profile__sub-header-info[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:14px;font-weight:400;font-weight:300;color:#b4b4b4}.profile__sub-header[_ngcontent-%COMP%]{text-transform:uppercase}.profile__name[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:72px;font-weight:400;font-weight:700}.profile__section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:16px 0}.profile__section-main[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;align-items:baseline}.profile__top-artists[_ngcontent-%COMP%], .profile__top-tracks[_ngcontent-%COMP%]{width:100%;padding:0 56px}.profile[_ngcontent-%COMP%]   .top-list__show-more[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400;border:2px solid #fff;border-radius:999rem;padding:8px 16px;color:#fff;text-decoration:none;cursor:pointer}.profile[_ngcontent-%COMP%]   .top-list__show-more[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.profile[_ngcontent-%COMP%]   .top-list__header[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:18px;font-weight:400;font-weight:700}.profile[_ngcontent-%COMP%]   .top-list__name[_ngcontent-%COMP%]{font-family:Signika,sans-serif;font-size:16px;font-weight:400}.profile[_ngcontent-%COMP%]   .top-list__row[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0}.profile[_ngcontent-%COMP%]   .top-list__img[_ngcontent-%COMP%]{width:50px;height:auto;border-radius:100%;border:2px solid #fff;margin-right:24px}.profile__playlist[_ngcontent-%COMP%]{width:100%;padding:0 56px}.profile[_ngcontent-%COMP%]   app-loading-equaliser[_ngcontent-%COMP%]{position:absolute;height:100vh;z-index:100}"]}),o})()}}]);